<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { color: #00769e; background-color: #f1f3f5; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #00769e; } /* Normal */
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #657422; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #00769e; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #00769e; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #00769e; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #5e5e5e; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

<style>
  div.csl-bib-body { }
  div.csl-entry {
    clear: both;
    }
  .hanging div.csl-entry {
    margin-left:2em;
    text-indent:-2em;
  }
  div.csl-left-margin {
    min-width:2em;
    float:left;
  }
  div.csl-right-inline {
    margin-left:2em;
    padding-left:1em;
  }
  div.csl-indent {
    margin-left: 2em;
  }
</style>

  <!--radix_placeholder_meta_tags-->
<title>VOSON Lab Code Blog: Analysis of website text content using quanteda</title>

<meta property="description" itemprop="description" content="Introduction to basic text analysis using the quanteda package, in the context of organisational website content."/>

<link rel="canonical" href="https://vosonlab.github.io/posts/2023-04-13-website-text-analysis-with-quanteda/"/>
<link rel="license" href="https://creativecommons.org/licenses/by/4.0/"/>
<link rel="icon" type="image/png" href="../../images/favicon.png"/>

<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2023-04-27"/>
<meta property="article:created" itemprop="dateCreated" content="2023-04-27"/>
<meta name="article:author" content="Robert Ackland"/>
<meta name="article:author" content="Sidiq Madya"/>
<meta name="article:author" content="Francisca Borquez"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="VOSON Lab Code Blog: Analysis of website text content using quanteda"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="Introduction to basic text analysis using the quanteda package, in the context of organisational website content."/>
<meta property="og:url" content="https://vosonlab.github.io/posts/2023-04-13-website-text-analysis-with-quanteda/"/>
<meta property="og:image" content="https://vosonlab.github.io/posts/2023-04-13-website-text-analysis-with-quanteda/xray_textplot_kwic.png"/>
<meta property="og:image:width" content="800"/>
<meta property="og:image:height" content="800"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="VOSON Lab Code Blog"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary_large_image"/>
<meta property="twitter:title" content="VOSON Lab Code Blog: Analysis of website text content using quanteda"/>
<meta property="twitter:description" content="Introduction to basic text analysis using the quanteda package, in the context of organisational website content."/>
<meta property="twitter:url" content="https://vosonlab.github.io/posts/2023-04-13-website-text-analysis-with-quanteda/"/>
<meta property="twitter:image" content="https://vosonlab.github.io/posts/2023-04-13-website-text-analysis-with-quanteda/xray_textplot_kwic.png"/>
<meta property="twitter:image:width" content="800"/>
<meta property="twitter:image:height" content="800"/>
<meta property="twitter:site" content="@vosonlab"/>

<!--  https://scholar.google.com/intl/en/scholar/inclusion.html#indexing -->
<meta name="citation_title" content="VOSON Lab Code Blog: Analysis of website text content using quanteda"/>
<meta name="citation_fulltext_html_url" content="https://vosonlab.github.io/posts/2023-04-13-website-text-analysis-with-quanteda/"/>
<meta name="citation_fulltext_world_readable" content=""/>
<meta name="citation_online_date" content="2023/04/27"/>
<meta name="citation_publication_date" content="2023/04/27"/>
<meta name="citation_author" content="Robert Ackland"/>
<meta name="citation_author_institution" content="VOSON Lab, School of Sociology, Australian National University"/>
<meta name="citation_author" content="Sidiq Madya"/>
<meta name="citation_author" content="Francisca Borquez"/>
<!--/radix_placeholder_meta_tags-->
  
  <meta name="citation_reference" content="citation_title=Web social science: Concepts, data and tools for social scientists in the digital age;citation_publisher=SAGE Publications;citation_author=R. Ackland"/>
  <meta name="citation_reference" content="citation_title=Online tools for content analysis;citation_publisher=SAGE;citation_author=R. Popping"/>
  <meta name="citation_reference" content="citation_title=Text analysis in r;citation_volume=11;citation_author=K. Welbers;citation_author=W. Van Attenveldt;citation_author=K. Benoit"/>
  <meta name="citation_reference" content="citation_title=Comparative study of symbols: An introduction;citation_publisher=Stanford University Press;citation_author=H. D. Lasswell;citation_author=D. Lerner;citation_author=I. S. Pool"/>
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["creative_commons","title","description","author","date","categories","output","draft","bibliography","csl","preview","citation_url","canonical_url"]}},"value":[{"type":"character","attributes":{},"value":["CC BY"]},{"type":"character","attributes":{},"value":["Analysis of website text content using quanteda"]},{"type":"character","attributes":{},"value":["Introduction to basic text analysis using the quanteda package, in the context of organisational website content."]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","affiliation","affiliation_url","url"]}},"value":[{"type":"character","attributes":{},"value":["Robert Ackland"]},{"type":"character","attributes":{},"value":["VOSON Lab, School of Sociology, Australian National University"]},{"type":"character","attributes":{},"value":["http://vosonlab.net/"]},{"type":"character","attributes":{},"value":["https://orcid.org/0000-0002-0008-1766"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Sidiq Madya"]},{"type":"character","attributes":{},"value":["https://orcid.org/0000-0002-8444-3145"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name"]}},"value":[{"type":"character","attributes":{},"value":["Francisca Borquez"]}]}]},{"type":"character","attributes":{},"value":["2023-04-27"]},{"type":"character","attributes":{},"value":["rstats","rvest","quanteda","text analysis","visualisation","word cloud","comparison cloud","data sovereignty"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_depth"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[3]}]}]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["refs.bib"]},{"type":"character","attributes":{},"value":["apa-style.csl"]},{"type":"character","attributes":{},"value":["xray_textplot_kwic.png"]},{"type":"character","attributes":{},"value":["https://vosonlab.github.io/posts/2023-04-13-website-text-analysis-with-quanteda/"]},{"type":"character","attributes":{},"value":["https://vosonlab.github.io/posts/2023-04-13-website-text-analysis-with-quanteda/"]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["apa-style.csl","domains_coded.csv","refs.bib","website-text-analysis-with-quanteda_files/anchor-4.2.2/anchor.min.js","website-text-analysis-with-quanteda_files/bowser-1.9.3/bowser.min.js","website-text-analysis-with-quanteda_files/distill-2.2.21/template.v2.js","website-text-analysis-with-quanteda_files/figure-html5/comparisoncloud-1.png","website-text-analysis-with-quanteda_files/figure-html5/kwic_xray-1.png","website-text-analysis-with-quanteda_files/figure-html5/kwic_xray2-1.png","website-text-analysis-with-quanteda_files/figure-html5/unnamed-chunk-10-1.png","website-text-analysis-with-quanteda_files/figure-html5/unnamed-chunk-11-1.png","website-text-analysis-with-quanteda_files/figure-html5/unnamed-chunk-12-1.png","website-text-analysis-with-quanteda_files/figure-html5/unnamed-chunk-13-1.png","website-text-analysis-with-quanteda_files/figure-html5/unnamed-chunk-14-1.png","website-text-analysis-with-quanteda_files/figure-html5/unnamed-chunk-9-1.png","website-text-analysis-with-quanteda_files/figure-html5/wordcloud-1.png","website-text-analysis-with-quanteda_files/figure-html5/wordcloud2-1.png","website-text-analysis-with-quanteda_files/figure-html5/wordcloud3-1.png","website-text-analysis-with-quanteda_files/header-attrs-2.19/header-attrs.js","website-text-analysis-with-quanteda_files/jquery-3.6.0/jquery-3.6.0.js","website-text-analysis-with-quanteda_files/jquery-3.6.0/jquery-3.6.0.min.js","website-text-analysis-with-quanteda_files/jquery-3.6.0/jquery-3.6.0.min.map","website-text-analysis-with-quanteda_files/popper-2.6.0/popper.min.js","website-text-analysis-with-quanteda_files/tippy-6.2.7/tippy-bundle.umd.min.js","website-text-analysis-with-quanteda_files/tippy-6.2.7/tippy-light-border.css","website-text-analysis-with-quanteda_files/tippy-6.2.7/tippy.css","website-text-analysis-with-quanteda_files/tippy-6.2.7/tippy.umd.min.js","website-text-analysis-with-quanteda_files/webcomponents-2.0.0/webcomponents.js","xray_textplot_kwic.png"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
  font-size: 100%;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      const citeChild = $(this).children()[0]
      // Do not process if @xyz has been used without escaping and without bibliography activated
      // https://github.com/rstudio/distill/issues/466
      if (citeChild === undefined) return true

      if (citeChild.nodeName == "D-FOOTNOTE") {
        var fn = citeChild
        $(this).html(fn.shadowRoot.querySelector("sup"))
        $(this).id = fn.id
        fn.remove()
      }
      var refs = $(this).attr('data-cites').split(" ");
      var refHtml = refs.map(function(ref) {
        // Could use CSS.escape too here, we insure backward compatibility in navigator
        return "<p>" + $('div[id="ref-' + ref + '"]').html() + "</p>";
      }).join("\n");
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // fix footnotes in tables (#411)
    // replacing broken distill.pub feature
    $('table d-footnote').each(function() {
      // we replace internal showAtNode methode which is triggered when hovering a footnote
      this.hoverBox.showAtNode = function(node) {
        // ported from https://github.com/distillpub/template/pull/105/files
        calcOffset = function(elem) {
            let x = elem.offsetLeft;
            let y = elem.offsetTop;
            // Traverse upwards until an `absolute` element is found or `elem`
            // becomes null.
            while (elem = elem.offsetParent && elem.style.position != 'absolute') {
                x += elem.offsetLeft;
                y += elem.offsetTop;
            }

            return { left: x, top: y };
        }
        // https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetTop
        const bbox = node.getBoundingClientRect();
        const offset = calcOffset(node);
        this.show([offset.left + bbox.width, offset.top + bbox.height]);
      }
    })

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    // ignore leaflet img layers (#106)
    figures = figures.filter(':not(img[class*="leaflet"])')
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace(/^index[.]html/, "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.19/header-attrs.js"></script>
  <script src="../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<script>
/*
script developed by @MilesMcBainon github
*/
  document.addEventListener("DOMContentLoaded", function () {
    if (!/posts/.test(location.pathname)) {
      return;
    }

    var script = document.createElement("script");
    script.src = "https://utteranc.es/client.js";
    script.setAttribute("repo", "vosonlab/vosonlab.github.io");
    script.setAttribute("issue-term", "og:title");
    script.setAttribute("crossorigin", "anonymous");
    script.setAttribute("label", "comment_thread");

    /* wait for article to load, append script to article element */
    var observer = new MutationObserver(function (mutations, observer) {
      var article = document.querySelector("d-article");
      if (article) {
        observer.disconnect();
        /* HACK: article scroll */
        article.setAttribute("style", "overflow-y: hidden");
        article.appendChild(script);
      }
    });

    observer.observe(document.body, { childList: true });
  });
</script>

<style type="text/css">
.distill-site-header .logo img {
    max-height: 35px;
    margin-bottom: -12px;
    margin-top: 8px;
}

.posts-list-caption {
  margin-top: -35px;
}

d-title {
  padding-bottom: 0 !important;
}

d-byline {
  padding: 0.2rem 0 !important;
}

.posts-list .post-preview .thumbnail {
  /*
  max-width: 400px !important;
  max-height: 300px !important;
  */
  padding-right: 4px;
}

.posts-list .post-preview img {
  /*
  width: 100% !important;
  height: 100% !important;
  */
}

.bs-callout {
  margin: 20px 0;
  padding: 15px 30px 15px 15px;
  border-left: 5px solid #eee;
}

.bs-callout h4 {
  margin-top: 0;
}

.bs-callout p:last-child {
  margin-bottom: 0;
}

.bs-callout code,
.bs-callout .highlight {
  background-color: #fff;
}

.bs-callout-danger {
  background-color: #fcf2f2;
  border-color: #d9534f;
}

.bs-callout-warning {
  background-color: #fefbed;
  border-color: #f0ad4e;
}

.bs-callout-info {
  background-color: #f0f7fd;
  border-color: #5bc0de;
}

</style>
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Analysis of website text content using quanteda","description":"Introduction to basic text analysis using the quanteda package, in the context of organisational website content.","authors":[{"author":"Robert Ackland","authorURL":"https://orcid.org/0000-0002-0008-1766","affiliation":"VOSON Lab, School of Sociology, Australian National University","affiliationURL":"http://vosonlab.net/","orcidID":""},{"author":"Sidiq Madya","authorURL":"https://orcid.org/0000-0002-8444-3145","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""},{"author":"Francisca Borquez","authorURL":"#","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2023-04-27T00:00:00.000+10:00","citationText":"Ackland, et al., 2023"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<span class="logo">
<img src="../../images/logo.png"/>
</span>
<a href="../../index.html" class="title">VOSON Lab Code Blog</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<a href="../../index.html">Home</a>
<a href="http://vosonlab.net/">
<i class="fa fa-flask" aria-hidden="true"></i>
</a>
<a href="https://twitter.com/vosonlab">
<i class="fa fa-twitter" aria-hidden="true"></i>
</a>
<a href="https://github.com/vosonlab">
<i class="fa fa-github" aria-hidden="true"></i>
</a>
<a href="../../index.xml">
<i class="fa fa-rss" aria-hidden="true"></i>
</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Analysis of website text content using quanteda</h1>
<!--radix_placeholder_categories-->
<div class="dt-tags">
  <a href="../../index.html#category:rstats" class="dt-tag">rstats</a>
  <a href="../../index.html#category:rvest" class="dt-tag">rvest</a>
  <a href="../../index.html#category:quanteda" class="dt-tag">quanteda</a>
  <a href="../../index.html#category:text_analysis" class="dt-tag">text analysis</a>
  <a href="../../index.html#category:visualisation" class="dt-tag">visualisation</a>
  <a href="../../index.html#category:word_cloud" class="dt-tag">word cloud</a>
  <a href="../../index.html#category:comparison_cloud" class="dt-tag">comparison cloud</a>
  <a href="../../index.html#category:data_sovereignty" class="dt-tag">data sovereignty</a>
</div>
<!--/radix_placeholder_categories-->
<p><p>Introduction to basic text analysis using the quanteda package, in the context of organisational website content.</p></p>
</div>

<div class="d-byline">
  Robert Ackland <a href="https://orcid.org/0000-0002-0008-1766" class="uri">https://orcid.org/0000-0002-0008-1766</a> (VOSON Lab, School of Sociology, Australian National University)<a href="http://vosonlab.net/" class="uri">http://vosonlab.net/</a>
  
,   Sidiq Madya <a href="https://orcid.org/0000-0002-8444-3145" class="uri">https://orcid.org/0000-0002-8444-3145</a> 
  
,   Francisca Borquez  
  
<br/>2023-04-27
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#introduction" id="toc-introduction">1. Introduction</a></li>
<li><a href="#getting-the-text-data-ready-for-analysis" id="toc-getting-the-text-data-ready-for-analysis">2. Getting the text data ready for analysis</a></li>
<li><a href="#introducing-text-analysis-with-quanteda---a-toy-example" id="toc-introducing-text-analysis-with-quanteda---a-toy-example">3. Introducing text analysis with <code>quanteda</code> - a toy example</a>
<ul>
<li><a href="#what-is-text-analysis-content-analysis" id="toc-what-is-text-analysis-content-analysis">3.1 What is text analysis (content analysis)?</a></li>
<li><a href="#steps-in-text-analysis" id="toc-steps-in-text-analysis">3.2 Steps in text analysis</a></li>
<li><a href="#toy-example-constructing-the-corpus" id="toc-toy-example-constructing-the-corpus">3.3 Toy example: Constructing the corpus</a></li>
<li><a href="#toy-example-text-pre-processing" id="toc-toy-example-text-pre-processing">3.4 Toy example: Text pre-processing</a></li>
<li><a href="#toy-example-text-pre-processing-1" id="toc-toy-example-text-pre-processing-1">3.5 Toy example: Text pre-processing</a></li>
</ul></li>
<li><a href="#application-to-text-content-from-data-sovereignty-websites" id="toc-application-to-text-content-from-data-sovereignty-websites">4. Application to text content from data sovereignty websites</a>
<ul>
<li><a href="#initial-exploration-of-particular-keywords-using-keywords-in-context-kwic" id="toc-initial-exploration-of-particular-keywords-using-keywords-in-context-kwic">4.1 Initial exploration of particular keywords, using keywords-in-context (kwic)</a></li>
<li><a href="#frequency-of-terms-and-the-document-feature-matrix" id="toc-frequency-of-terms-and-the-document-feature-matrix">4.2 Frequency of terms and the document-feature matrix</a></li>
<li><a href="#using-dictionary-based-coding" id="toc-using-dictionary-based-coding">4.3 Using dictionary-based coding</a></li>
<li><a href="#comparison-cloud" id="toc-comparison-cloud">4.4 Comparison cloud</a></li>
</ul></li>
</ul>
</nav>
</div>
<h2 id="introduction">1. Introduction</h2>
<p>In our previous post in this series (<a href="https://vosonlab.github.io/posts/2023-02-23-hyperlink-networks-and-website-text-content/">Hyperlink networks and website text content</a>), we used <code>tidytext</code> and other packages to conduct text analysis on organisational websites content, specifically word frequency counts, word clouds, comparison clouds. In this post, we will demonstrate how to use <code>quanteda</code> to undertake similar text analysis. The post will also introduce some more of the basics of text analysis e.g.constructing a corpus and document-feature matrix and dictionary-based coding. <a href="http://quanteda.io/"><code>quanteda</code></a> is an R package for natural language processing and analysis, and tutorials on using <code>quanteda</code> can be found <a href="https://tutorials.quanteda.io">here</a>.</p>
<p>The text content used in this example involves text content from organisational websites involved in the discussion of data sovereignty; these data were collected using <code>rvest</code> (see <a href="https://vosonlab.github.io/posts/2023-01-20-hyperlink-networks-pre-processing/">Hyperlink networks: data pre-processing techniques</a>).</p>
<h2 id="getting-the-text-data-ready-for-analysis">2. Getting the text data ready for analysis</h2>
<p>In the first place, we load up the text dataframe that was created in the <a href="https://vosonlab.github.io/posts/2023-02-23-hyperlink-networks-and-website-text-content/">previous post</a> in this series:</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://yihui.org/knitr/'>knitr</a></span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>textContent</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/readRDS.html'>readRDS</a></span><span class='op'>(</span><span class='st'>"textContent.rds"</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>textContent</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>&#39;data.frame&#39;:   75 obs. of  2 variables:
 $ page: chr  &quot;https://womeninlocalization.com/partners/&quot; &quot;https://womeninlocalization.com/data-localization-laws-around-the-world/&quot; &quot;https://iwgia.org/en/network.html&quot; &quot;https://www.iwgia.org/en/indigenous-data-sovereignty/4699-iw-2022-indigenous-data-sovereignty.html?filter_tag[0]=37&quot; ...
 $ text: chr  &quot;Women in Localization (W.L.) is certified as a 501 (c)(3) tax-exempt nonprofit. Its mission is to foster a glob&quot;| __truncated__ &quot; Data localization laws can be a challenge for some and nearly nothing for others. After all, everything depend&quot;| __truncated__ &quot;\r\n\r\n\t\tWritten on 11 March 2011. Posted in About IWGIA\r\n\t Since 1968, IWGIA has worked for protecting, &quot;| __truncated__ &quot;\r\n\r\n\t\tWritten on 01 April 2022. Posted in Indigenous Data Sovereignty\r\n\t Indigenous Peoples have alway&quot;| __truncated__ ...</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/r/base/nrow.html'>nrow</a></span><span class='op'>(</span><span class='va'>textContent</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 75</code></pre>
</div>
<p>There are 75 URLs which we used <code>rvest</code> to collect website text content from. In the previous post we noted that a few of these pages are duplicates (http and https versions of the same page) and that there are some URLs that are links to PDF files (from which, <code>rvest</code> does not extract text data). Please note that, to simplify the process we are not pre-processing these issues this exercise.</p>
<p>The next step involves extracting the domain names from the URLs and use a manually-coded <code>.csv</code> file to categorise websites as to whether the represented organisations are based on the Global North or South (see the <a href="https://vosonlab.github.io/posts/2023-02-23-hyperlink-networks-and-website-text-content/">previous post</a> for more on this).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#function from https://stackoverflow.com/questions/19020749/function-to-extract-domain-name-from-url-in-r</span></span>
<span><span class='va'>domain</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='fu'><a href='https://rdrr.io/r/base/strsplit.html'>strsplit</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/grep.html'>gsub</a></span><span class='op'>(</span><span class='st'>"http://|https://|www\\."</span>, <span class='st'>""</span>, <span class='va'>x</span><span class='op'>)</span>, <span class='st'>"/"</span><span class='op'>)</span><span class='op'>[[</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span><span class='op'>)</span><span class='op'>]</span><span class='op'>]</span></span>
<span></span>
<span><span class='va'>dd</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/lapply.html'>sapply</a></span><span class='op'>(</span><span class='va'>textContent</span><span class='op'>$</span><span class='va'>page</span>, <span class='va'>domain</span><span class='op'>)</span></span>
<span><span class='va'>textContent</span><span class='op'>$</span><span class='va'>domain</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span><span class='op'>(</span><span class='va'>dd</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'>#code websites as from Global North/South</span></span>
<span><span class='va'>coded</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.csv</a></span><span class='op'>(</span><span class='st'>"domains_coded.csv"</span><span class='op'>)</span></span>
<span><span class='co'>#&gt; head(coded)</span></span>
<span><span class='co'>#  X                       x  type</span></span>
<span><span class='co'>#1 1 womeninlocalization.com north</span></span>
<span><span class='co'>#2 2               iwgia.org north</span></span>
<span><span class='co'>#3 3   indigenousdatalab.org north</span></span>
<span><span class='co'>#4 4           botpopuli.net south</span></span>
<span><span class='co'>#5 5              cipesa.org south</span></span>
<span><span class='co'>#6 6              mydata.org north</span></span>
<span></span>
<span><span class='co'>#now get the north/south classification into the dataframe containing the tokens</span></span>
<span><span class='va'>textContent</span><span class='op'>$</span><span class='va'>type</span> <span class='op'>&lt;-</span> <span class='va'>coded</span><span class='op'>$</span><span class='va'>type</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/match.html'>match</a></span><span class='op'>(</span><span class='va'>textContent</span><span class='op'>$</span><span class='va'>domain</span>, <span class='va'>coded</span><span class='op'>$</span><span class='va'>x</span><span class='op'>)</span><span class='op'>]</span></span>
<span></span>
<span><span class='co'>#capitalise the labels, for the plot</span></span>
<span><span class='va'>textContent</span><span class='op'>$</span><span class='va'>type</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>textContent</span><span class='op'>$</span><span class='va'>type</span><span class='op'>==</span><span class='st'>"north"</span>, <span class='st'>"North"</span>, <span class='st'>"South"</span><span class='op'>)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>textContent</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>&#39;data.frame&#39;:   75 obs. of  4 variables:
 $ page  : chr  &quot;https://womeninlocalization.com/partners/&quot; &quot;https://womeninlocalization.com/data-localization-laws-around-the-world/&quot; &quot;https://iwgia.org/en/network.html&quot; &quot;https://www.iwgia.org/en/indigenous-data-sovereignty/4699-iw-2022-indigenous-data-sovereignty.html?filter_tag[0]=37&quot; ...
 $ text  : chr  &quot;Women in Localization (W.L.) is certified as a 501 (c)(3) tax-exempt nonprofit. Its mission is to foster a glob&quot;| __truncated__ &quot; Data localization laws can be a challenge for some and nearly nothing for others. After all, everything depend&quot;| __truncated__ &quot;\r\n\r\n\t\tWritten on 11 March 2011. Posted in About IWGIA\r\n\t Since 1968, IWGIA has worked for protecting, &quot;| __truncated__ &quot;\r\n\r\n\t\tWritten on 01 April 2022. Posted in Indigenous Data Sovereignty\r\n\t Indigenous Peoples have alway&quot;| __truncated__ ...
 $ domain: chr  &quot;womeninlocalization.com&quot; &quot;womeninlocalization.com&quot; &quot;iwgia.org&quot; &quot;iwgia.org&quot; ...
 $ type  : chr  &quot;North&quot; &quot;North&quot; &quot;North&quot; &quot;North&quot; ...</code></pre>
</div>
<p>Note that there are two domains/organisations for which we do not have a North/South code, but in these two cases there was no text data extracted from the web pages. There is an additional row in the dataframe where the text column is empty. So, we will remove the three domains from our analysis.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#two domains are for web pages where no text data was collected</span></span>
<span><span class='va'>textContent</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>type</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>                                               page text
1 https://digitallibrary.un.org/record/218450?ln=en     
2                             http://unstats.un.org     
                 domain type
1 digitallibrary.un.org &lt;NA&gt;
2        unstats.un.org &lt;NA&gt;</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#we will remove these rows from the dataframe</span></span>
<span><span class='va'>textContent</span> <span class='op'>&lt;-</span> <span class='va'>textContent</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>type</span><span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'>#note that there is still one other row in the dataframe where the text column is empty, </span></span>
<span><span class='va'>textContent</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>text</span><span class='op'>==</span><span class='st'>""</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>                                        page text  domain  type
1 https://doi.org/10.1016/j.jnma.2021.03.008      doi.org North</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#so we may as well remove this row here</span></span>
<span><span class='va'>textContent</span> <span class='op'>&lt;-</span> <span class='va'>textContent</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/filter.html'>filter</a></span><span class='op'>(</span><span class='va'>text</span><span class='op'>!=</span><span class='st'>""</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'>#number of web pages for which we have text content and the domain has been coded (Global North or South)</span></span>
<span><span class='va'>textContent</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>   n
1 72</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#Number of unique domains</span></span>
<span><span class='va'>textContent</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/distinct.html'>distinct</a></span><span class='op'>(</span><span class='va'>domain</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/count.html'>count</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>   n
1 32</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#Number of domains from Global North and South</span></span>
<span><span class='va'>textContent</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://dplyr.tidyverse.org/reference/distinct.html'>distinct</a></span><span class='op'>(</span><span class='va'>domain</span>, .keep_all <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='va'>count</span></span></code></pre>
</div>
<pre><code>   n
1 32</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#save this dataframe for use in later blog posts</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/readRDS.html'>saveRDS</a></span><span class='op'>(</span><span class='va'>textContent</span>, <span class='st'>"textContent2.rds"</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<p>The above shows that we now have 72 web pages from which we have collected text data. These pages are from 32 unique domains which we have coded as organisations from the Global North (21) or Global South (11).</p>
<h2 id="introducing-text-analysis-with-quanteda---a-toy-example">3. Introducing text analysis with <code>quanteda</code> - a toy example</h2>
<p>Before proceeding with our analysis of text from websites discussing data sovereignty, it is useful to take a step back and introduce some more of the fundamentals of quantitative text analysis. This will also allow us to introduce the use of <code>quanteda</code>.</p>
<h3 id="what-is-text-analysis-content-analysis">3.1 What is text analysis (content analysis)?</h3>
<p>In this post we use the terms content analysis and (quantitative) text analysis interchangeably. While we do not provide a thorough introduction to text analysis, there are many resources available such as: <span class="citation" data-cites="Popping2017">Popping (<a href="#ref-Popping2017" role="doc-biblioref">2017</a>)</span> who provides an overview of content analysis and some of the relevant software tools, and <span class="citation" data-cites="Welbers_etal2017">Welbers et al. (<a href="#ref-Welbers_etal2017" role="doc-biblioref">2017</a>)</span> who introduce computational text analysis using the R statistical software. <span class="citation" data-cites="Ackland2013">Ackland (<a href="#ref-Ackland2013" role="doc-biblioref">2013</a>)</span> (Section 2.4) provides a brief introduction to text analysis using data from the web.</p>
<p>The following quotes are useful:</p>
<blockquote>
<p>Content analysis is a systematic reduction of a <strong>flow of text</strong> to a standard
set of statistically manipulable symbols representing the presence, the
intensity, or the frequency of some characteristics, which allows making
replicable and valid inferences from <strong>text</strong> to their <strong>context</strong>. In most
situations the <strong>source of the text</strong> is investigated, but this should not
exclude the text itself, the <strong>audience</strong> or the <strong>receivers</strong> of the text. It
involves measurement. Qualitative data are quantified for the purpose of
affording statistical inference. <span class="citation" data-cites="Popping2017">Popping (<a href="#ref-Popping2017" role="doc-biblioref">2017, p. 2</a>)</span></p>
</blockquote>
<blockquote>
<p>Content analysis is a technique which aims at describing, with optimum
objectivity precision, and generalizability, what is said on a given subject
in a given place at a given time.<strong>Who</strong> (says) <strong>What</strong> (to) <strong>Whom</strong> (in) <strong>What Channel</strong> (with) <strong>What Effect</strong>. <span class="citation" data-cites="Laswell_etal1952">Lasswell et al. (<a href="#ref-Laswell_etal1952" role="doc-biblioref">1952, p. 34</a>)</span></p>
</blockquote>
<p>Content analysis can be used to identify <strong>themes</strong> and the <strong>relationships between themes</strong>. The occurrence of themes, in combination with analysis of social structure (e.g.using network analysis), can be used to address research questions such as: What issues are being promoted by environmental activist organisations?, Who are the agenda setters with regards to issues in Australian politics?, How prominent is a theme in an online discussion (where prominence could be measured by the network position the person/people promoting the theme)?</p>
<h3 id="steps-in-text-analysis">3.2 Steps in text analysis</h3>
<p>We can identify the following main steps in text analysis.</p>
<p><strong>First</strong>, process the flow of text into:</p>
<ul>
<li><p><strong>Documents</strong>: collections of words (spoken or written) with associated metadata such as date when the text was written, who authored the text etc. In our data sovereignty websites example, a document is the text collected from a web page.</p></li>
<li><p><strong>Corpus</strong>: collection of documents stored in one place.</p></li>
</ul>
<p><strong>Second</strong>, pre-process the corpus:</p>
<ul>
<li><strong>Tokenisation</strong>: splitting the text into tokens (most often, these are words). More generally, a token is a sequence of characters (usually delimited by space or punctuation) that make a semantic unit; could include words, multi-word expressions, named entities, stems or lemma.</li>
<li><strong>Normalisation</strong>: Lowercasing, stemming (words with suffixes removed, using a set of rules), lemmatisation (involves identifying the intended meaning of a word in a sentence or in a document).</li>
<li><strong>Removing stopwords</strong>: Common words such as the in the English language are rarely informative about the content of a text.</li>
</ul>
<p>The goal of pre-processing is to reduce the total number of <strong>types</strong>, where a type is a unique token. Note that the pre-processing stage may involve the use of a <strong>dictionary</strong> or <strong>lexicon</strong> - a controlled list of codes (tags) to reduce the number of types (e.g.by identifying synonyms) and to develop or identify themes, in the context of a particular research topic or question.</p>
<p><strong>Third</strong>, represent the corpus as a <strong>document-term matrix (DTM) or document-feature matrix (DFM)</strong>:</p>
<ul>
<li>A DTM is a matrix in which the rows are documents, columns are terms, and cells indicate frequency of occurrence of terms in document</li>
<li>Known as a bag-of-words format</li>
<li>Allows text data to be analysed using matrix algebra (we have now moved from text to numbers).</li>
</ul>
<p>Note that some authors distinguish term and feature but we use these interchangeably here.</p>
<h3 id="toy-example-constructing-the-corpus">3.3 Toy example: Constructing the corpus</h3>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://quanteda.io'>quanteda</a></span><span class='op'>)</span></span>
<span><span class='co'>#library(readtext)</span></span>
<span></span>
<span><span class='co'># create some documents</span></span>
<span><span class='va'>toydocs</span>  <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"A corpus is a set of documents."</span>, </span>
<span>              <span class='st'>"This is the second document in the corpus."</span>, </span>
<span>              <span class='st'>"A document contains tokens or various types"</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># create some document variables</span></span>
<span><span class='va'>typedf</span>  <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>type <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'definition'</span>, <span class='st'>'example'</span>, <span class='st'>'definition'</span><span class='op'>)</span>, </span>
<span>                      author <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Adrian"</span>, <span class='st'>"Rob"</span>, <span class='st'>"Adrian"</span><span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># Create text corpus</span></span>
<span><span class='va'>toycorpus</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://quanteda.io/reference/corpus.html'>corpus</a></span><span class='op'>(</span><span class='va'>toydocs</span>, docvars <span class='op'>=</span> <span class='va'>typedf</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># Create tokens from corpus</span></span>
<span><span class='va'>toytokens</span>  <span class='op'>&lt;-</span>  <span class='fu'><a href='https://quanteda.io/reference/tokens.html'>tokens</a></span><span class='op'>(</span><span class='va'>toycorpus</span>, remove_punct <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>toytokens</span></span></code></pre>
</div>
<pre><code>Tokens consisting of 3 documents and 2 docvars.
text1 :
[1] &quot;A&quot;         &quot;corpus&quot;    &quot;is&quot;        &quot;a&quot;         &quot;set&quot;      
[6] &quot;of&quot;        &quot;documents&quot;

text2 :
[1] &quot;This&quot;     &quot;is&quot;       &quot;the&quot;      &quot;second&quot;   &quot;document&quot; &quot;in&quot;      
[7] &quot;the&quot;      &quot;corpus&quot;  

text3 :
[1] &quot;A&quot;        &quot;document&quot; &quot;contains&quot; &quot;tokens&quot;   &quot;or&quot;       &quot;various&quot; 
[7] &quot;types&quot;   </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://quanteda.io/reference/docvars.html'>docvars</a></span><span class='op'>(</span><span class='va'>toycorpus</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>        type author
1 definition Adrian
2    example    Rob
3 definition Adrian</code></pre>
</div>
<p>As you can see, the corpus has three documents, called text1, text2, text3. Each document has a range of tokens. Even in the toy example, there are variations in the tokens that we might want to minimise: the aim is to reduce the number of types (unique tokens).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://quanteda.io/reference/ndoc.html'>ndoc</a></span><span class='op'>(</span><span class='va'>toycorpus</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 3</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://quanteda.io/reference/ntoken.html'>ntoken</a></span><span class='op'>(</span><span class='va'>toytokens</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>text1 text2 text3 
    7     8     7 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://quanteda.io/reference/ntoken.html'>ntype</a></span><span class='op'>(</span><span class='va'>toytokens</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>text1 text2 text3 
    7     7     7 </code></pre>
</div>
<h3 id="toy-example-text-pre-processing">3.4 Toy example: Text pre-processing</h3>
<p>Here are some typical text cleaning or pre-processing steps. Note the use of the pipe operator (<code>%&gt;%</code>), which allows us to chain operations together.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># remove stopwords</span></span>
<span><span class='va'>toytokens</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://quanteda.io/reference/tokens_select.html'>tokens_remove</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/stopwords/man/stopwords.html'>stopwords</a></span><span class='op'>(</span><span class='st'>'en'</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>Tokens consisting of 3 documents and 2 docvars.
text1 :
[1] &quot;corpus&quot;    &quot;set&quot;       &quot;documents&quot;

text2 :
[1] &quot;second&quot;   &quot;document&quot; &quot;corpus&quot;  

text3 :
[1] &quot;document&quot; &quot;contains&quot; &quot;tokens&quot;   &quot;various&quot;  &quot;types&quot;   </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># other cleaning - lower case</span></span>
<span><span class='va'>toytokens</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://quanteda.io/reference/tokens_tolower.html'>tokens_tolower</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>Tokens consisting of 3 documents and 2 docvars.
text1 :
[1] &quot;a&quot;         &quot;corpus&quot;    &quot;is&quot;        &quot;a&quot;         &quot;set&quot;      
[6] &quot;of&quot;        &quot;documents&quot;

text2 :
[1] &quot;this&quot;     &quot;is&quot;       &quot;the&quot;      &quot;second&quot;   &quot;document&quot; &quot;in&quot;      
[7] &quot;the&quot;      &quot;corpus&quot;  

text3 :
[1] &quot;a&quot;        &quot;document&quot; &quot;contains&quot; &quot;tokens&quot;   &quot;or&quot;       &quot;various&quot; 
[7] &quot;types&quot;   </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># stem the corpus to reduce the number of types</span></span>
<span><span class='va'>toytokens</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://quanteda.io/reference/tokens_wordstem.html'>tokens_wordstem</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>Tokens consisting of 3 documents and 2 docvars.
text1 :
[1] &quot;A&quot;        &quot;corpus&quot;   &quot;is&quot;       &quot;a&quot;        &quot;set&quot;      &quot;of&quot;      
[7] &quot;document&quot;

text2 :
[1] &quot;This&quot;     &quot;is&quot;       &quot;the&quot;      &quot;second&quot;   &quot;document&quot; &quot;in&quot;      
[7] &quot;the&quot;      &quot;corpus&quot;  

text3 :
[1] &quot;A&quot;        &quot;document&quot; &quot;contain&quot;  &quot;token&quot;    &quot;or&quot;       &quot;various&quot; 
[7] &quot;type&quot;    </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># extend tokens to include multi-word</span></span>
<span><span class='va'>toytokens</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://quanteda.io/reference/tokens_ngrams.html'>tokens_ngrams</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>Tokens consisting of 3 documents and 2 docvars.
text1 :
 [1] &quot;A&quot;         &quot;corpus&quot;    &quot;is&quot;        &quot;a&quot;         &quot;set&quot;      
 [6] &quot;of&quot;        &quot;documents&quot; &quot;A_corpus&quot;  &quot;corpus_is&quot; &quot;is_a&quot;     
[11] &quot;a_set&quot;     &quot;set_of&quot;   
[ ... and 1 more ]

text2 :
 [1] &quot;This&quot;            &quot;is&quot;              &quot;the&quot;            
 [4] &quot;second&quot;          &quot;document&quot;        &quot;in&quot;             
 [7] &quot;the&quot;             &quot;corpus&quot;          &quot;This_is&quot;        
[10] &quot;is_the&quot;          &quot;the_second&quot;      &quot;second_document&quot;
[ ... and 3 more ]

text3 :
 [1] &quot;A&quot;                 &quot;document&quot;          &quot;contains&quot;         
 [4] &quot;tokens&quot;            &quot;or&quot;                &quot;various&quot;          
 [7] &quot;types&quot;             &quot;A_document&quot;        &quot;document_contains&quot;
[10] &quot;contains_tokens&quot;   &quot;tokens_or&quot;         &quot;or_various&quot;       
[ ... and 1 more ]</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># chaining all of these together, and creating a new "cleaned" tokens object</span></span>
<span><span class='va'>toytokens_clean</span>  <span class='op'>&lt;-</span> <span class='va'>toytokens</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://quanteda.io/reference/tokens_tolower.html'>tokens_tolower</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://quanteda.io/reference/tokens_select.html'>tokens_remove</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/stopwords/man/stopwords.html'>stopwords</a></span><span class='op'>(</span><span class='st'>'en'</span><span class='op'>)</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> </span>
<span>  <span class='fu'><a href='https://quanteda.io/reference/tokens_wordstem.html'>tokens_wordstem</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span></span>
<span>    <span class='fu'><a href='https://quanteda.io/reference/tokens_ngrams.html'>tokens_ngrams</a></span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>1</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<h3 id="toy-example-text-pre-processing-1">3.5 Toy example: Text pre-processing</h3>
<p>The final step for this toy example is to create a document-feature matrix and explore the most frequent features.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>toydfm</span>  <span class='op'>&lt;-</span>  <span class='fu'><a href='https://quanteda.io/reference/dfm.html'>dfm</a></span><span class='op'>(</span><span class='va'>toytokens_clean</span><span class='op'>)</span></span>
<span><span class='va'>toydfm</span></span></code></pre>
</div>
<pre><code>Document-feature matrix of: 3 documents, 8 features (54.17% sparse) and 2 docvars.
       features
docs    corpus set document second contain token various type
  text1      1   1        1      0       0     0       0    0
  text2      1   0        1      1       0     0       0    0
  text3      0   0        1      0       1     1       1    1</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://quanteda.io/reference/topfeatures.html'>topfeatures</a></span><span class='op'>(</span><span class='va'>toydfm</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>document   corpus      set   second  contain    token  various 
       3        2        1        1        1        1        1 
    type 
       1 </code></pre>
</div>
<p>The top features in the document-feature matrix could become keywords for content analysis.</p>
<h2 id="application-to-text-content-from-data-sovereignty-websites">4. Application to text content from data sovereignty websites</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#create corpus (text stored in 'text' column so don't need to specify text_field argument)</span></span>
<span><span class='va'>corpus1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://quanteda.io/reference/corpus.html'>corpus</a></span><span class='op'>(</span><span class='va'>textContent</span><span class='op'>)</span></span>
<span><span class='co'>#the other columns in the dataframe become the document variables</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='fu'><a href='https://quanteda.io/reference/docvars.html'>docvars</a></span><span class='op'>(</span><span class='va'>corpus1</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>                                                                                                                 page
1                                                                           https://womeninlocalization.com/partners/
2                                            https://womeninlocalization.com/data-localization-laws-around-the-world/
3                                                                                   https://iwgia.org/en/network.html
4 https://www.iwgia.org/en/indigenous-data-sovereignty/4699-iw-2022-indigenous-data-sovereignty.html?filter_tag[0]=37
5                                                                             https://indigenousdatalab.org/networks/
6                                                                     https://indigenousdatalab.org/projects-working/
                   domain  type
1 womeninlocalization.com North
2 womeninlocalization.com North
3               iwgia.org North
4               iwgia.org North
5   indigenousdatalab.org North
6   indigenousdatalab.org North</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://quanteda.io/reference/ndoc.html'>ndoc</a></span><span class='op'>(</span><span class='va'>corpus1</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>[1] 72</code></pre>
</div>
<p>As noted, the next step involves extracting standard linguistic units or <strong>tokens</strong> from the documents (website content). As before, it is a usual practice to clean the corpus by removing stopwords, numbers and punctuation. However, there may be reasons why the researcher does not want to do such cleaning: it depends on the research question. It is worth noting that content analysis  as a counting-based method  is strongly affected by how the corpus is tokenised.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>tokens1</span>  <span class='op'>&lt;-</span> <span class='fu'><a href='https://quanteda.io/reference/tokens.html'>tokens</a></span><span class='op'>(</span><span class='va'>corpus1</span>, remove_numbers <span class='op'>=</span> <span class='cn'>TRUE</span>, remove_punct <span class='op'>=</span> <span class='cn'>TRUE</span>, remove_separators <span class='op'>=</span> <span class='cn'>TRUE</span>, remove_url <span class='op'>=</span> <span class='cn'>TRUE</span> <span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>tokens1</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>Tokens consisting of 72 documents and 3 docvars.
text1 :
 [1] &quot;Women&quot;        &quot;in&quot;           &quot;Localization&quot; &quot;W.L&quot;         
 [5] &quot;is&quot;           &quot;certified&quot;    &quot;as&quot;           &quot;a&quot;           
 [9] &quot;c&quot;            &quot;tax-exempt&quot;   &quot;nonprofit&quot;    &quot;Its&quot;         
[ ... and 68 more ]

text2 :
 [1] &quot;Data&quot;         &quot;localization&quot; &quot;laws&quot;         &quot;can&quot;         
 [5] &quot;be&quot;           &quot;a&quot;            &quot;challenge&quot;    &quot;for&quot;         
 [9] &quot;some&quot;         &quot;and&quot;          &quot;nearly&quot;       &quot;nothing&quot;     
[ ... and 1,179 more ]

text3 :
 [1] &quot;Written&quot; &quot;on&quot;      &quot;March&quot;   &quot;Posted&quot;  &quot;in&quot;      &quot;About&quot;  
 [7] &quot;IWGIA&quot;   &quot;Since&quot;   &quot;IWGIA&quot;   &quot;has&quot;     &quot;worked&quot;  &quot;for&quot;    
[ ... and 2,959 more ]

text4 :
 [1] &quot;Written&quot;     &quot;on&quot;          &quot;April&quot;       &quot;Posted&quot;     
 [5] &quot;in&quot;          &quot;Indigenous&quot;  &quot;Data&quot;        &quot;Sovereignty&quot;
 [9] &quot;Indigenous&quot;  &quot;Peoples&quot;     &quot;have&quot;        &quot;always&quot;     
[ ... and 3,944 more ]

text5 :
 [1] &quot;Collaboratory&quot; &quot;for&quot;           &quot;Indigenous&quot;    &quot;Data&quot;         
 [5] &quot;Governance&quot;    &quot;Research&quot;      &quot;Policy&quot;        &quot;and&quot;          
 [9] &quot;Practice&quot;      &quot;for&quot;           &quot;Indigenous&quot;    &quot;Data&quot;         
[ ... and 102 more ]

text6 :
 [1] &quot;Collaboratory&quot; &quot;for&quot;           &quot;Indigenous&quot;    &quot;Data&quot;         
 [5] &quot;Governance&quot;    &quot;Research&quot;      &quot;Policy&quot;        &quot;and&quot;          
 [9] &quot;Practice&quot;      &quot;for&quot;           &quot;Indigenous&quot;    &quot;Data&quot;         
[ ... and 1,536 more ]

[ reached max_ndoc ... 66 more documents ]</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#number of tokens in the first document</span></span>
<span><span class='fu'><a href='https://quanteda.io/reference/ntoken.html'>ntoken</a></span><span class='op'>(</span><span class='va'>tokens1</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span></span></code></pre>
</div>
<pre><code>text1 
   80 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#number of types in the first document</span></span>
<span><span class='fu'><a href='https://quanteda.io/reference/ntoken.html'>ntype</a></span><span class='op'>(</span><span class='va'>tokens1</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span></span></code></pre>
</div>
<pre><code>text1 
   53 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#convert the tokens to lower case</span></span>
<span><span class='va'>tokens1_lower</span>  <span class='op'>&lt;-</span> <span class='fu'><a href='https://quanteda.io/reference/tokens_tolower.html'>tokens_tolower</a></span><span class='op'>(</span><span class='va'>tokens1</span><span class='op'>)</span></span>
<span><span class='co'>#remove stopwords</span></span>
<span><span class='va'>tokens1_clean</span>  <span class='op'>&lt;-</span> <span class='fu'><a href='https://quanteda.io/reference/tokens_select.html'>tokens_remove</a></span><span class='op'>(</span><span class='va'>tokens1_lower</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/pkg/stopwords/man/stopwords.html'>stopwords</a></span><span class='op'>(</span><span class='st'>'en'</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'>#the dplyr way of doing the above</span></span>
<span><span class='co'>#tokens1_clean  &lt;- tokens1 %&gt;% tokens_tolower() %&gt;% tokens_remove(stopwords('en'))</span></span>
<span></span>
<span><span class='co'>#number of tokens in the first document</span></span>
<span><span class='fu'><a href='https://quanteda.io/reference/ntoken.html'>ntoken</a></span><span class='op'>(</span><span class='va'>tokens1_clean</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span></span></code></pre>
</div>
<pre><code>text1 
   50 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#number of types in the first document</span></span>
<span><span class='fu'><a href='https://quanteda.io/reference/ntoken.html'>ntype</a></span><span class='op'>(</span><span class='va'>tokens1_clean</span><span class='op'>)</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span></span></code></pre>
</div>
<pre><code>text1 
   37 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'># You could also stem the tokens to further reduce the number of types in the corpus</span></span>
<span><span class='co'># For the time being, we'll use data where stemming hasn't been applied</span></span></code></pre>
</div>
</div>
<p>The above shows that converting to lower case and removing stopwords significantly reduces the number of tokens and the number of unique tokens (types): for document 1 the number of tokens decreases from 80 to 50 and the number of types decreases from 53 to 37.</p>
<p>In the following step, we transform the tokens to ngrams (specifically, unigrams (one-word concept) and bigrams (two-word concepts), so as to find multi-word tokens appearing in the corpus.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>tokens1_ngram</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://quanteda.io/reference/tokens_ngrams.html'>tokens_ngrams</a></span><span class='op'>(</span><span class='va'>tokens1_clean</span>, n <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='fl'>2</span><span class='op'>)</span></span></code></pre>
</div>
</div>
<h3 id="initial-exploration-of-particular-keywords-using-keywords-in-context-kwic">4.1 Initial exploration of particular keywords, using keywords-in-context (kwic)</h3>
<p>Given the documents are now loaded as corpus, you could begin content analysis by exploring some keywords. These keywords would depend on your research topic. For our exercise, we use keywords-in-context (kwic) to explore how the term data is being used in the web pages we have collected. This may allow us to identify associated terms that might become additional keywords for investigation. That is, keywords-in-context might lead to the discovery of new themes or sub-themes.</p>
<p>Keywords-in-context can be plotted in <code>quanteda</code> using the <code>textplot_xray</code> command. The <code>xray</code> or lexical dispersion plot provides a sense of variations in the usage of keywords across documents. The following figure shows that in some documents (e.g.8 and 9) the word data appears very frequently, while it doesnt appear at all in document 1.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#explore keywords and plot their distribution within documents</span></span>
<span><span class='va'>kwic1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://quanteda.io/reference/kwic.html'>kwic</a></span><span class='op'>(</span><span class='va'>tokens1_ngram</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'data'</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>kwic1</span><span class='op'>)</span></span></code></pre>
</div>
<pre><code>Keyword-in-context with 6 matches.                                                                     
  [text2, 1]                                                   | data
 [text2, 14]          everything depends located sector making | data
 [text2, 25]             see increasing number countries adopt | data
 [text2, 33]              laws step better protection personal | data
 [text2, 39]                care everyone using computer sends | data
 [text2, 45] according australian government&#39;s guides personal | data
                                                    
 | localization laws can challenge nearly           
 | localization due countries specific good         
 | localization sovereignty laws step better        
 | care everyone using computer sends               
 | according australian government&#39;s guides personal
 | covered laws include clearly together            </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>quanteda.textplots</span><span class='op'>)</span></span>
<span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://ggplot2.tidyverse.org'>ggplot2</a></span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/quanteda.textplots/man/textplot_xray.html'>textplot_xray</a></span><span class='op'>(</span><span class='va'>kwic1</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>color <span class='op'>=</span> <span class='va'>keyword</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>'Keywords in context:'</span>, <span class='st'>'data'</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<div class="figure">
<img src="website-text-analysis-with-quanteda_files/figure-html5/kwic_xray-1.png" alt="quanteda xray plot - 1" width="672" />
<p class="caption">
(#fig:kwic_xray)quanteda xray plot - 1
</p>
</div>
</div>
<p>The following <code>xray</code> plot shows the frequency of usage of the keywords data, personal, and localization across the corpus.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>kwic1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://quanteda.io/reference/kwic.html'>kwic</a></span><span class='op'>(</span><span class='va'>tokens1_ngram</span>, <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'data'</span>, <span class='st'>'personal'</span>, <span class='st'>'localization'</span><span class='op'>)</span><span class='op'>)</span></span>
<span><span class='co'>#head(kwic1)</span></span>
<span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/quanteda.textplots/man/textplot_xray.html'>textplot_xray</a></span><span class='op'>(</span><span class='va'>kwic1</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>color <span class='op'>=</span> <span class='va'>keyword</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/labs.html'>ggtitle</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='st'>'Keywords in context:'</span>, <span class='st'>'data, personal, localization'</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<div class="figure">
<img src="website-text-analysis-with-quanteda_files/figure-html5/kwic_xray2-1.png" alt="quanteda xray plot - 2" width="672" />
<p class="caption">
(#fig:kwic_xray2)quanteda xray plot - 2
</p>
</div>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='co'>#png("xray_textplot_kwic.png", width=800, height=800)</span></span>
<span><span class='co'>#textplot_xray(kwic1) + aes(color = keyword) + ggtitle(paste('Keywords in context:', 'data, personal, localization'))</span></span>
<span><span class='co'>#dev.off()</span></span></code></pre>
</div>
</div>
<h3 id="frequency-of-terms-and-the-document-feature-matrix">4.2 Frequency of terms and the document-feature matrix</h3>
<p>A basic aspect of content analysis is to assess the importance of terms or features by computing their frequency of usage. This allows the identification of important terms in the corpus and it also may be used to assess whether keywords selected for analysis using keywords-in-context are important in the corpus. A further step (later in this exercise) is to assess how terms are related to one another (part of this would involve assessing how keywords studied using keywords-in-context are related other terms in the corpus).</p>
<p>To answer these questions we first create a document-feature matrix. Note the shift in terminology. In setting up the corpus, we talk about <strong>tokens</strong>. Now that the cleaning, simplification and standardisation is done, we talk about <strong>features</strong> (remember that in this blogpost we use terms and features interchangeably). Below we print the top-10 features (based on frequency) and we plot a word cloud of the 200 most frequently-used features.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>dfm1</span>  <span class='op'>&lt;-</span>  <span class='fu'><a href='https://quanteda.io/reference/dfm.html'>dfm</a></span><span class='op'>(</span><span class='va'>tokens1_ngram</span><span class='op'>)</span></span>
<span><span class='va'>dfm1</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://quanteda.io/reference/topfeatures.html'>topfeatures</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/pkg/knitr/man/kable.html'>kable</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">data</td>
<td style="text-align: right;">2906</td>
</tr>
<tr class="even">
<td style="text-align: left;">|</td>
<td style="text-align: right;">984</td>
</tr>
<tr class="odd">
<td style="text-align: left;">indigenous</td>
<td style="text-align: right;">807</td>
</tr>
<tr class="even">
<td style="text-align: left;">health</td>
<td style="text-align: right;">427</td>
</tr>
<tr class="odd">
<td style="text-align: left;">research</td>
<td style="text-align: right;">378</td>
</tr>
<tr class="even">
<td style="text-align: left;">can</td>
<td style="text-align: right;">369</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sovereignty</td>
<td style="text-align: right;">346</td>
</tr>
<tr class="even">
<td style="text-align: left;">access</td>
<td style="text-align: right;">346</td>
</tr>
<tr class="odd">
<td style="text-align: left;">services</td>
<td style="text-align: right;">337</td>
</tr>
<tr class="even">
<td style="text-align: left;">ids</td>
<td style="text-align: right;">336</td>
</tr>
</tbody>
</table>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='fu'><a href='https://rdrr.io/pkg/quanteda.textplots/man/textplot_wordcloud.html'>textplot_wordcloud</a></span><span class='op'>(</span><span class='va'>dfm1</span>, min_size <span class='op'>=</span> <span class='fl'>1</span>, max_words <span class='op'>=</span> <span class='fl'>200</span><span class='op'>)</span></span></code></pre>
</div>
<div class="figure"><span style="display:block;" id="fig:wordcloud"></span>
<img src="website-text-analysis-with-quanteda_files/figure-html5/wordcloud-1.png" alt="Word cloud" width="672" />
<p class="caption">
Figure 1: Word cloud
</p>
</div>
</div>
<p>As we found in the <a href="https://vosonlab.github.io/posts/2023-02-23-hyperlink-networks-and-website-text-content/">previous post</a> where we produced a word cloud produced with the <code>tidytext</code> and <code>wordcloud</code> packages, the word cloud is dominated by the presence of the word data. In the previous post, we used a customised stop word list to remove data from the word cloud. In the present post, we will control for the dominance of the word data using another approach. Specifically, we will make use of the term frequency-inverse document frequency (tf-idf) weighting scheme, which weight counts of features according to the how often they appear in that document vs.how many documents contain that feature. The tf-idf weighting scheme can often give a better sense of significance of a keyword in a document and a corpus. In the following code, we also use the <code>tokens_select()</code> function in <code>quanteda</code> to remove tokens that have fewer than three characters in length (this will remove the pipe character |, which is presently the second-ranked feature in terms of frequency of use).</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>dfm1</span> <span class='op'>&lt;-</span> <span class='va'>tokens1_ngram</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://quanteda.io/reference/tokens_select.html'>tokens_select</a></span><span class='op'>(</span>min_nchar <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://quanteda.io/reference/dfm.html'>dfm</a></span><span class='op'>(</span><span class='op'>)</span></span>
<span><span class='va'>dfm1</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://quanteda.io/reference/dfm_tfidf.html'>dfm_tfidf</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://quanteda.io/reference/topfeatures.html'>topfeatures</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/pkg/knitr/man/kable.html'>kable</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">data</td>
<td style="text-align: right;">565.4340</td>
</tr>
<tr class="even">
<td style="text-align: left;">indigenous</td>
<td style="text-align: right;">466.9132</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ids</td>
<td style="text-align: right;">463.7510</td>
</tr>
<tr class="even">
<td style="text-align: left;">health</td>
<td style="text-align: right;">247.0532</td>
</tr>
<tr class="odd">
<td style="text-align: left;">data_space</td>
<td style="text-align: right;">210.8858</td>
</tr>
<tr class="even">
<td style="text-align: left;">google_scholar</td>
<td style="text-align: right;">197.6504</td>
</tr>
<tr class="odd">
<td style="text-align: left;">indigenous_data</td>
<td style="text-align: right;">179.1825</td>
</tr>
<tr class="even">
<td style="text-align: left;">pubmed</td>
<td style="text-align: right;">174.3059</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fraunhofer</td>
<td style="text-align: right;">168.0807</td>
</tr>
<tr class="even">
<td style="text-align: left;">scholar</td>
<td style="text-align: right;">161.9302</td>
</tr>
</tbody>
</table>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>dfm1</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://quanteda.io/reference/dfm_tfidf.html'>dfm_tfidf</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/pkg/quanteda.textplots/man/textplot_wordcloud.html'>textplot_wordcloud</a></span><span class='op'>(</span>min_size <span class='op'>=</span> <span class='fl'>1</span>, max_words <span class='op'>=</span> <span class='fl'>200</span><span class='op'>)</span></span></code></pre>
</div>
<div class="figure"><span style="display:block;" id="fig:wordcloud2"></span>
<img src="website-text-analysis-with-quanteda_files/figure-html5/wordcloud2-1.png" alt="Word cloud - 2" width="672" />
<p class="caption">
Figure 2: Word cloud - 2
</p>
</div>
</div>
<h3 id="using-dictionary-based-coding">4.3 Using dictionary-based coding</h3>
<p>Creating a dictionary is one way to code documents according to a specific set of questions or problems. A dictionary can also be used to handle synonyms.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>dict1</span>  <span class='op'>&lt;-</span>  <span class='fu'><a href='https://quanteda.io/reference/dictionary.html'>dictionary</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>identity <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'identity'</span>, <span class='st'>'identities'</span>, <span class='st'>'ids'</span><span class='op'>)</span>,</span>
<span>                                member <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'member'</span>, <span class='st'>'members'</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>tokens2</span>  <span class='op'>&lt;-</span>  <span class='fu'><a href='https://quanteda.io/reference/tokens_lookup.html'>tokens_lookup</a></span><span class='op'>(</span><span class='va'>tokens1_ngram</span>,</span>
<span>    dictionary <span class='op'>=</span> <span class='va'>dict1</span>,  exclusive <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></span>
<span></span>
<span><span class='va'>dfm2</span> <span class='op'>&lt;-</span> <span class='va'>tokens2</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://quanteda.io/reference/tokens_select.html'>tokens_select</a></span><span class='op'>(</span>min_nchar <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://quanteda.io/reference/dfm.html'>dfm</a></span><span class='op'>(</span><span class='op'>)</span></span>
<span><span class='va'>dfm2</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://quanteda.io/reference/dfm_tfidf.html'>dfm_tfidf</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://quanteda.io/reference/topfeatures.html'>topfeatures</a></span><span class='op'>(</span><span class='fl'>10</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/pkg/knitr/man/kable.html'>kable</a></span><span class='op'>(</span><span class='op'>)</span></span></code></pre>
</div>
<table>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">data</td>
<td style="text-align: right;">565.4340</td>
</tr>
<tr class="even">
<td style="text-align: left;">indigenous</td>
<td style="text-align: right;">466.9132</td>
</tr>
<tr class="odd">
<td style="text-align: left;">health</td>
<td style="text-align: right;">247.0532</td>
</tr>
<tr class="even">
<td style="text-align: left;">identity</td>
<td style="text-align: right;">245.0384</td>
</tr>
<tr class="odd">
<td style="text-align: left;">data_space</td>
<td style="text-align: right;">210.8858</td>
</tr>
<tr class="even">
<td style="text-align: left;">google_scholar</td>
<td style="text-align: right;">197.6504</td>
</tr>
<tr class="odd">
<td style="text-align: left;">indigenous_data</td>
<td style="text-align: right;">179.1825</td>
</tr>
<tr class="even">
<td style="text-align: left;">pubmed</td>
<td style="text-align: right;">174.3059</td>
</tr>
<tr class="odd">
<td style="text-align: left;">fraunhofer</td>
<td style="text-align: right;">168.0807</td>
</tr>
<tr class="even">
<td style="text-align: left;">scholar</td>
<td style="text-align: right;">161.9302</td>
</tr>
</tbody>
</table>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>dfm2</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://quanteda.io/reference/dfm_tfidf.html'>dfm_tfidf</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://rdrr.io/pkg/quanteda.textplots/man/textplot_wordcloud.html'>textplot_wordcloud</a></span><span class='op'>(</span>min_size <span class='op'>=</span> <span class='fl'>1</span>, max_words <span class='op'>=</span> <span class='fl'>200</span><span class='op'>)</span></span></code></pre>
</div>
<div class="figure"><span style="display:block;" id="fig:wordcloud3"></span>
<img src="website-text-analysis-with-quanteda_files/figure-html5/wordcloud3-1.png" alt="Word cloud - 3" width="672" />
<p class="caption">
Figure 3: Word cloud - 3
</p>
</div>
</div>
<p>With the use of the above dictionary, we find that health becomes the third-top feature (when using the tf-idf weighting) and identity moves to fourth. While we do not examine this here, by setting <code>exclusive=FALSE</code> in <code>tokens_lookup()</code> we can reduce the corpus to <strong>only</strong> those terms in the dictionary. A dictionary might cover several themes, or you might have separate dictionaries for each theme.</p>
<h3 id="comparison-cloud">4.4 Comparison cloud</h3>
<p>As a final step in this blog post, we show how to produce a comparison cloud (comparing word use by organisations from the Global North and Global South) using <code>quanteda</code>.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span><span class='va'>dfm3</span> <span class='op'>&lt;-</span> <span class='va'>dfm2</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://quanteda.io/reference/dfm_group.html'>dfm_group</a></span><span class='op'>(</span><span class='va'>type</span><span class='op'>)</span> <span class='op'><a href='https://magrittr.tidyverse.org/reference/pipe.html'>%&gt;%</a></span> <span class='fu'><a href='https://quanteda.io/reference/dfm_trim.html'>dfm_trim</a></span><span class='op'>(</span>min_termfreq <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span></span>
<span><span class='fu'><a href='https://rdrr.io/pkg/quanteda.textplots/man/textplot_wordcloud.html'>textplot_wordcloud</a></span><span class='op'>(</span><span class='va'>dfm3</span>, comparison <span class='op'>=</span> <span class='cn'>TRUE</span>, min_size <span class='op'>=</span> <span class='fl'>1</span>, max_words <span class='op'>=</span> <span class='fl'>100</span>, color <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"red"</span>, <span class='st'>"blue"</span><span class='op'>)</span><span class='op'>)</span></span></code></pre>
</div>
<div class="figure"><span style="display:block;" id="fig:comparisoncloud"></span>
<img src="website-text-analysis-with-quanteda_files/figure-html5/comparisoncloud-1.png" alt="Comparison cloud" width="672" />
<p class="caption">
Figure 4: Comparison cloud
</p>
</div>
</div>
<p>The word cloud above compares prominent words and phrases produced by the Global North and the Global South organisations. It appears that indigenous-related issues and health are the most prominent topic in the North. Using <code>quanteda</code> to perform unigram and bigram, it becomes possible to detect themes and a number of potential sub themes such as a topic of indigenousity which is discussed in relation to the problem of indigenous data and indigenous peoples in the North. Other words such as health and services are also popular which give us an impression that another potential themes discussed could be related to the problem of health services. It can be said that indigenous data sovereignty and health services become two major concerns for organisations in the North when discussing data sovereignty issues.</p>
<p>Meanwhile in the South, the word digital and policy along with names such as India, Africa and countries are interestingly dominant in the discussion. It may indicate that digital policy issues are central for organisations in the South compared at least to the North. Probably, India and African countries inform about the context of where such issues emerged. It is interesting to notice that other potentially meaningful phrases such as right, development and cross-border data flows are most frequently discussed in the South. A concept of the North/South divide might provide some clues to answer why organisations in different regions raise different concerns of issues when data sovereignty notions are debated on the web.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<div id="refs" class="references csl-bib-body hanging-indent" data-line-spacing="2" role="doc-bibliography">
<div id="ref-Ackland2013" class="csl-entry" role="doc-biblioentry">
Ackland, R. (2013). <em>Web social science: Concepts, data and tools for social scientists in the digital age</em>. SAGE Publications.
</div>
<div id="ref-Laswell_etal1952" class="csl-entry" role="doc-biblioentry">
Lasswell, H. D., Lerner, D. &amp; S. Pool, I. d. (1952). <em>Comparative study of symbols: An introduction</em>. Stanford University Press.
</div>
<div id="ref-Popping2017" class="csl-entry" role="doc-biblioentry">
Popping, R. (2017). Online tools for content analysis. In R. M. L. N. Fielding &amp; G. Blank (Eds.), <em>The SAGE handbook of online research methods</em>. SAGE.
</div>
<div id="ref-Welbers_etal2017" class="csl-entry" role="doc-biblioentry">
Welbers, K., Attenveldt, W. V. &amp; Benoit, K. (2017). Text analysis in r. <em>Communication Methods and Measures</em>, <em>11</em>, 245265.
</div>
</div>
<!--radix_placeholder_article_footer-->
<div class="article-footer">
  <p class="social_footer">
    <span class="article-sharing">
      Share: &nbsp;
      <a href="https://twitter.com/share?text=Analysis%20of%20website%20text%20content%20using%20quanteda&amp;url=https%3A%2F%2Fvosonlab.github.io%2Fposts%2F2023-04-13-website-text-analysis-with-quanteda%2F" aria-label="share on twitter">
        <i class="fab fa-twitter" aria-hidden="true"></i>
      </a>
      <a href="https://www.facebook.com/sharer/sharer.php?s=100&amp;p[url]=https%3A%2F%2Fvosonlab.github.io%2Fposts%2F2023-04-13-website-text-analysis-with-quanteda%2F" aria-label="share on facebook">
        <i class="fab fa-facebook" aria-hidden="true"></i>
      </a>
    </span>
  </p>
</div>
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom">
  <h3 id="references">References</h3>
  <div id="references-listing"></div>
  <h3 id="reuse">Reuse</h3>
  <p>Text and figures are licensed under Creative Commons Attribution <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>. The figures that have been reused from other sources don't fall under this license and can be recognized by a note in their caption: "Figure from ...".</p>
  <h3 id="citation">Citation</h3>
  <p>For attribution, please cite this work as</p>
  <pre class="citation-appendix short">Ackland, et al. (2023, April 27). VOSON Lab Code Blog: Analysis of website text content using quanteda. Retrieved from https://vosonlab.github.io/posts/2023-04-13-website-text-analysis-with-quanteda/</pre>
  <p>BibTeX citation</p>
  <pre class="citation-appendix long">@misc{ackland2023analysis,
  author = {Ackland, Robert and Madya, Sidiq and Borquez, Francisca},
  title = {VOSON Lab Code Blog: Analysis of website text content using quanteda},
  url = {https://vosonlab.github.io/posts/2023-04-13-website-text-analysis-with-quanteda/},
  year = {2023}
}</pre>
</div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
